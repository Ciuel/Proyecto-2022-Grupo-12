{% set current_template = self._TemplateReference__context.name %}
{% extends "base.html" %}
{% block css %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='fonts/fontawesome-all.min.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/Pretty-Search-Form-.css') }}" />
{% endblock css %}
{% block title %} Disciplinas {% endblock title %}

<body>
  {% block content %}
  <section class="d-flex justify-content-xxl-center">
    {% if has_permission(session["user"],"discipline_create") %}
    <a href="{{ url_for('discipline.get_add') }}">
      <button class="btn own_golden_bg own_add_button" type="button">
        Agregar
      </button>
    </a>
    {% endif %}
    {% if has_permission(session["user"],"discipline_index") %}
    {% include "search.html" %}
    {% endif %}
  </section>
  {% include "flashes.html" %}
  <section class="d-flex justify-content-xxl-center">
    <div class="own_main_body own_centered">
      <table id="example" class="table table-striped table-bordered" style="width:90rem">
        <thead>
          <tr class="own_table_header">
            <th style="width: 15%">Nombre</th>
            <th style="width: 15%">Categoría</th>
            <th style="width: 15%">Instructores</th>
            <th style="width: 25%">Días y horarios</th>
            <th style="width: 10%">Costo mensual</th>
            <th style="width: 10%">Cupo</th>
            {% if has_permission(session["user"],"discipline_update") %}
            <th style="width: 5%">Modificar</th>
            {%endif%}
            {% if has_permission(session["user"],"discipline_destroy") %}
            <th style="width: 5%">Eliminar</th>
            {%endif%}
          </tr>
        </thead>
        <tbody>
          {% for discipline in disciplines.items %}
          <tr class="own_centered">
            <td> {{ discipline.name }} </td>
            <td> {{ discipline.category }} </td>
            <td> {{ discipline.instructors }} </td>
            <td> {{ discipline.dates }} </td>
            <td> {{ discipline.monthly_cost }} {{ discipline.currency }} </td>
            <td> {{ "Si" if discipline.available else "No" }} </td>
            </td>
            {% if has_permission(session["user"],"discipline_update") %}
            <td class="own_options_section">
              <a href="{{ url_for('discipline.update', id=discipline.id) }}">
                <button class="btn btn-outline-info w-100 p-1 own_options_button" style="border-radius: 5px"
                  name="Update" value="{{ discipline.id }}">
                  Mod.
                </button>
              </a>
            </td>
            {%endif%}
            {% if has_permission(session["user"],"discipline_destroy") %}
            <td class="own_options_section">
              <form action="{{ url_for('discipline.delete', id=discipline.id) }}" method="post">
                <button type="submit" class="btn btn-outline-danger w-100 p-1 own_options_button"
                  style="border-radius: 5px" name="Delete" value="{{ discipline.id }}"
                  onclick="return confirm('Seguro que desea eliminar {{ discipline.name }} {{ discipline.category }} ?');">
                  X
                </button>
              </form>
            </td>
            {%endif%}
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>
  {% include "paginator.html"%}
  {% endblock content%}
  {% block js %}
  <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>
  {{ super() }}
  {% endblock js %}
</body>
