{% set current_template = self._TemplateReference__context.name %}
{% extends "base_list.html" %}
{% block css %}
{{ super() }}
<link rel="stylesheet" href="{{ url_for('static', filename='fonts/fontawesome-all.min.css') }}" />
<link rel="stylesheet" href="{{ url_for('static', filename='css/Pretty-Search-Form-.css') }}" />
{% endblock css %}
{% block title %} Disciplinas {% endblock title %}

<body>
  {% block upperbar %}
  <div class="d-flex justify-content-center align-items-center" id="searchHeader">
      {% if has_permission(session["user"],"discipline_create") %}
      <a href="{{ url_for('discipline.get_add') }}">
        <button class="btn own_golden_bg own_add_button" type="button">
          Agregar
        </button>
      </a>
      {% endif %}
      {% if has_permission(session["user"],"discipline_index") %}
      {% include "search.html" %}
      {% endif %}
  </div>
  {% endblock upperbar %}
  {% block table %}
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Nombre</th>
        <th>Categoría</th>
        <th>Instructores</th>
        <th>Días y horarios</th>
        <th>Costo mensual</th>
        <th>Cupo</th>
        {% if has_permission(session["user"],"discipline_update") %}
        <th>Modificar</th>
        {%endif%}
        {% if has_permission(session["user"],"discipline_destroy") %}
        <th>Eliminar</th>
        {%endif%}
      </tr>
    </thead>
    <tbody>
      {% for discipline in disciplines.items %}
      <tr>
        <td style="--title1:'Nombre';"> {{ discipline.name }} </td>
        <td style="--title2:'Categoría';"> {{ discipline.category }} </td>
        <td style="--title3:'Instructores';"> {{ discipline.instructors }} </td>
        <td style="--title4:'Fechas';"> {{ discipline.dates }} </td>
        <td style="--title5:'Costo mensual';"> {{ discipline.monthly_cost }} {{ discipline.currency }} </td>
        <td style="--title6:'Cupo';"> {{ "Si" if discipline.available else "No" }} </td>
        {% if has_permission(session["user"],"discipline_update") %}
        <td style="--title7:'Modificar';">
          <a href="{{ url_for('discipline.update', id=discipline.id) }}">
            <button class="btn btn-outline-info w-100 p-1 own_options_button" style="border-radius: 5px"
              name="Update" value="{{ discipline.id }}">
              Mod.
            </button>
          </a>
        </td>
        {%endif%}
        {% if has_permission(session["user"],"discipline_destroy") %}
        <td style="--title8:'Eliminar';">
          <form action="{{ url_for('discipline.delete', id=discipline.id) }}" method="post">
            <button type="submit" class="btn btn-outline-danger w-100 p-1 own_options_button"
              style="border-radius: 5px" name="Delete" value="{{ discipline.id }}"
              onclick="return confirm('Seguro que desea eliminar {{ discipline.name }} {{ discipline.category }} ?');">
              X
            </button>
          </form>
        </td>
        {%endif%}
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endblock table %}
  {% block js %}
  <script src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.10.15/js/dataTables.bootstrap.min.js"></script>
  {{ super() }}
  {% endblock js %}
</body>
